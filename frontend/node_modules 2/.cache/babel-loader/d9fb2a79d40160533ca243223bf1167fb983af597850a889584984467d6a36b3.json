{"ast":null,"code":"var _jsxFileName = \"/Users/kei/AIdeator-LLM/frontend/src/components/MindMap.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './MindMap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MindMap = ({\n  centralQuestion,\n  concepts\n}) => {\n  _s();\n  const [positions, setPositions] = useState({});\n  const [draggedConcept, setDraggedConcept] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [activeNodes, setActiveNodes] = useState(concepts.map(() => true));\n  const [expandedNodeIndex, setExpandedNodeIndex] = useState(null);\n  const [expandedConcepts, setExpandedConcepts] = useState([]);\n  const mapRef = useRef(null);\n  const conceptRefs = useRef([]);\n  const centralRef = useRef(null);\n\n  // Initialize refs for concept nodes\n  useEffect(() => {\n    conceptRefs.current = Array(concepts.length).fill().map(() => /*#__PURE__*/React.createRef());\n  }, [concepts.length]);\n\n  // Initialize positions in a balanced layout\n  useEffect(() => {\n    if (Object.keys(positions).length === 0) {\n      // Positions that match the reference image exactly\n      const initialPositions = {\n        'concept-0': {\n          x: 0,\n          y: -180\n        },\n        // Top\n        'concept-1': {\n          x: -280,\n          y: 0\n        },\n        // Left\n        'concept-2': {\n          x: 280,\n          y: 0\n        },\n        // Right\n        'concept-3': {\n          x: -180,\n          y: 200\n        },\n        // Bottom Left\n        'concept-4': {\n          x: 180,\n          y: 200\n        } // Bottom Right\n      };\n      setPositions(initialPositions);\n    }\n  }, [positions]);\n\n  // Expand a node with 5 new child nodes\n  const expandNode = index => {\n    console.log(\"Expanding node\", index);\n    setExpandedNodeIndex(index);\n\n    // Create 5 new concept nodes with titles and descriptions\n    const newConcepts = [{\n      title: \"Fear of letting others down\",\n      description: \"Social and professional pressures can make people fear judgment from peers.\"\n    }, {\n      title: \"Concept B\",\n      description: \"A detailed description of concept B and its implications.\"\n    }, {\n      title: \"Concept C\",\n      description: \"A detailed description of concept C and its implications.\"\n    }, {\n      title: \"Concept D\",\n      description: \"A detailed description of concept D and its implications.\"\n    }, {\n      title: \"Concept E\",\n      description: \"A detailed description of concept E and its implications.\"\n    }];\n    setExpandedConcepts(newConcepts);\n\n    // Create positions for the new nodes following the parent's side\n    const parentPos = positions[`concept-${index}`];\n    const newPositions = {\n      ...positions\n    };\n\n    // Determine which side the parent node is on relative to the center\n    // This uses the standard layout: top, left, right, bottom-left, bottom-right\n    let direction;\n    if (index === 0) {\n      // Top node - place children above it\n      direction = 'top';\n    } else if (index === 1) {\n      // Left node - place children to the left\n      direction = 'left';\n    } else if (index === 2) {\n      // Right node - place children to the right\n      direction = 'right';\n    } else if (index === 3) {\n      // Bottom Left node - place children below and to the left\n      direction = 'bottom-left';\n    } else if (index === 4) {\n      // Bottom Right node - place children below and to the right\n      direction = 'bottom-right';\n    }\n    console.log(\"Direction for expanded nodes:\", direction);\n\n    // Position nodes based on the parent's position/direction\n    switch (direction) {\n      case 'top':\n        // Arrange horizontally above the parent\n        for (let i = 0; i < newConcepts.length; i++) {\n          const xOffset = (i - 2) * 120; // -240, -120, 0, 120, 240\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x + xOffset,\n            y: parentPos.y - 150\n          };\n        }\n        break;\n      case 'left':\n        // Arrange vertically to the left - increase spacing\n        for (let i = 0; i < newConcepts.length; i++) {\n          const yOffset = (i - 2) * 100; // -200, -100, 0, 100, 200\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x - 250,\n            y: parentPos.y + yOffset\n          };\n        }\n        break;\n      case 'right':\n        // Arrange vertically to the right - increase spacing\n        for (let i = 0; i < newConcepts.length; i++) {\n          const yOffset = (i - 2) * 100; // -200, -100, 0, 100, 200\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x + 250,\n            y: parentPos.y + yOffset\n          };\n        }\n        break;\n      case 'bottom-left':\n        // Arrange horizontally below and to the left\n        for (let i = 0; i < newConcepts.length; i++) {\n          const xOffset = (i - 2) * 120; // -240, -120, 0, 120, 240\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x - 100 + xOffset,\n            y: parentPos.y + 150\n          };\n        }\n        break;\n      case 'bottom-right':\n        // Arrange horizontally below and to the right\n        for (let i = 0; i < newConcepts.length; i++) {\n          const xOffset = (i - 2) * 120; // -240, -120, 0, 120, 240\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x + 100 + xOffset,\n            y: parentPos.y + 150\n          };\n        }\n        break;\n    }\n    setPositions(newPositions);\n  };\n\n  // Toggle node active state\n  const toggleNodeActive = index => {\n    // Count how many inactive nodes we currently have\n    const inactiveCount = activeNodes.filter(active => !active).length;\n\n    // If this node is already inactive, we can always make it active again\n    if (!activeNodes[index]) {\n      setActiveNodes(prev => {\n        const newActive = [...prev];\n        newActive[index] = true;\n        return newActive;\n      });\n      // If we're activating a node, clear expansion\n      if (expandedNodeIndex !== null) {\n        setExpandedNodeIndex(null);\n        setExpandedConcepts([]);\n      }\n      return;\n    }\n\n    // If this would be the 5th inactive node (all inactive), don't allow it\n    if (inactiveCount === 4) {\n      // Find the only remaining active node (which must be this one)\n      const activeNodeIndices = activeNodes.map((active, i) => active ? i : -1).filter(i => i >= 0);\n      if (activeNodeIndices.length === 1 && activeNodeIndices[0] === index) {\n        console.log(\"Can't deactivate the last node\");\n        return;\n      }\n    }\n\n    // Make this node inactive\n    setActiveNodes(prev => {\n      const newActive = [...prev];\n      newActive[index] = false;\n      return newActive;\n    });\n\n    // Check if we now have 4 inactive nodes (1 active)\n    const newInactiveCount = inactiveCount + 1;\n    if (newInactiveCount === 4) {\n      // Find the one remaining active node\n      const remainingActiveIndex = activeNodes.findIndex((active, i) => active && i !== index);\n      if (remainingActiveIndex !== -1) {\n        // Expand the remaining active node\n        expandNode(remainingActiveIndex);\n      }\n    }\n  };\n\n  // Render connections between nodes using SVG\n  const renderConnections = () => {\n    if (!mapRef.current) return null;\n\n    // Get the exact center coordinates of the map in pixels\n    const mapWidth = mapRef.current.clientWidth;\n    const mapHeight = mapRef.current.clientHeight;\n    const centerX = mapWidth / 2;\n    const centerY = mapHeight / 2;\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"connections\",\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: 1,\n        overflow: 'visible'\n      },\n      children: [concepts.map((_, index) => {\n        const pos = positions[`concept-${index}`] || {\n          x: 0,\n          y: 0\n        };\n\n        // Use exact pixel coordinates for absolutely precise connections\n        return /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: centerX,\n          y1: centerY,\n          x2: centerX + pos.x,\n          y2: centerY + pos.y,\n          stroke: activeNodes[index] ? \"#000\" : \"#aaa\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeDasharray: activeNodes[index] ? \"none\" : \"5,5\",\n          opacity: activeNodes[index] ? 1 : 0.7\n        }, `line-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this);\n      }), expandedNodeIndex !== null && expandedConcepts.map((_, i) => {\n        const parentPos = positions[`concept-${expandedNodeIndex}`] || {\n          x: 0,\n          y: 0\n        };\n        const childPos = positions[`expanded-${expandedNodeIndex}-${i}`];\n        if (!childPos) return null;\n\n        // Use exact pixel coordinates for expanded node connections too\n        return /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: centerX + parentPos.x,\n          y1: centerY + parentPos.y,\n          x2: centerX + childPos.x,\n          y2: centerY + childPos.y,\n          stroke: \"#000\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\"\n        }, `expanded-line-${expandedNodeIndex}-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Handle starting to drag a concept\n  const handleMouseDown = useCallback((e, id) => {\n    e.stopPropagation(); // Prevent background interactions\n\n    const containerRect = mapRef.current.getBoundingClientRect();\n    const containerCenterX = containerRect.width / 2;\n    const containerCenterY = containerRect.height / 2;\n\n    // Calculate offset from the cursor to the element's center\n    const conceptRect = e.currentTarget.getBoundingClientRect();\n    const conceptCenterX = (conceptRect.left + conceptRect.right) / 2 - containerRect.left - containerCenterX;\n    const conceptCenterY = (conceptRect.top + conceptRect.bottom) / 2 - containerRect.top - containerCenterY;\n\n    // Calculate offset from concept center to click point\n    const offsetX = e.clientX - containerRect.left - containerCenterX - conceptCenterX;\n    const offsetY = e.clientY - containerRect.top - containerCenterY - conceptCenterY;\n    setDraggedConcept(id);\n    setDragOffset({\n      x: offsetX,\n      y: offsetY\n    });\n  }, []);\n\n  // Handle dragging a concept\n  const handleMouseMove = useCallback(e => {\n    e.stopPropagation(); // Prevent background interactions\n\n    if (draggedConcept) {\n      // Get the container's dimensions and position for accurate drag calculation\n      const containerRect = mapRef.current.getBoundingClientRect();\n      const containerCenterX = containerRect.width / 2;\n      const containerCenterY = containerRect.height / 2;\n\n      // Calculate new position relative to container center\n      const newX = e.clientX - containerRect.left - containerCenterX - dragOffset.x;\n      const newY = e.clientY - containerRect.top - containerCenterY - dragOffset.y;\n      setPositions(prev => ({\n        ...prev,\n        [draggedConcept]: {\n          x: newX,\n          y: newY\n        }\n      }));\n    }\n  }, [draggedConcept, dragOffset]);\n\n  // Handle dropping a concept\n  const handleMouseUp = useCallback(e => {\n    e.stopPropagation(); // Prevent background interactions\n    setDraggedConcept(null);\n  }, []);\n\n  // Use useEffect to ensure connections are updated when node dimensions change\n  useEffect(() => {\n    // Create a resize observer to detect size changes in nodes\n    const resizeObserver = new ResizeObserver(() => {\n      // Force a re-render to update connections\n      setPositions({\n        ...positions\n      });\n    });\n\n    // Observe central node\n    if (centralRef.current) {\n      resizeObserver.observe(centralRef.current);\n    }\n\n    // Observe all concept nodes\n    conceptRefs.current.forEach(ref => {\n      if (ref.current) {\n        resizeObserver.observe(ref.current);\n      }\n    });\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [conceptRefs.current.length, centralRef.current, expandedNodeIndex]);\n\n  // Console log for debugging\n  console.log(\"Active nodes:\", activeNodes);\n  console.log(\"Expanded node index:\", expandedNodeIndex);\n  console.log(\"Expanded concepts:\", expandedConcepts);\n  console.log(\"Positions:\", positions);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mind-map-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mind-map\",\n      ref: mapRef,\n      children: [renderConnections(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"central-question\",\n        ref: centralRef,\n        children: centralQuestion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), concepts.map((concept, index) => {\n        const pos = positions[`concept-${index}`] || {\n          x: 0,\n          y: 0\n        };\n        const isDragging = draggedConcept === `concept-${index}`;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `concept ${!activeNodes[index] ? 'inactive' : ''} ${isDragging ? 'dragging' : ''} ${index === expandedNodeIndex ? 'expanded' : ''}`,\n          style: {\n            top: `calc(50% + ${pos.y}px)`,\n            left: `calc(50% + ${pos.x}px)`,\n            cursor: isDragging ? 'grabbing' : 'grab'\n          },\n          ref: conceptRefs.current[index],\n          onMouseDown: e => handleMouseDown(e, `concept-${index}`),\n          onClick: e => {\n            e.stopPropagation();\n            if (!draggedConcept) {\n              toggleNodeActive(index);\n            }\n          },\n          children: concept\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this);\n      }), expandedNodeIndex !== null && expandedConcepts.map((concept, index) => {\n        const pos = positions[`expanded-${expandedNodeIndex}-${index}`];\n        if (!pos) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"concept expanded-child\",\n          \"data-expanded-index\": `${expandedNodeIndex}-${index}`,\n          style: {\n            top: `calc(50% + ${pos.y}px)`,\n            left: `calc(50% + ${pos.x}px)`,\n            border: '2px solid #000'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"concept-title\",\n            children: concept.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this), concept.description && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"concept-description\",\n            children: concept.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"concept-icon\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              width: \"24\",\n              height: \"24\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                fill: \"none\",\n                d: \"M0 0h24v24H0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M9.973 18h4.054c.132-1.202.745-2.194 1.74-3.277.113-.122.832-.867.917-.973a6 6 0 1 0-9.37-.002c.086.107.807.853.918.974.996 1.084 1.609 2.076 1.741 3.278zM14 20h-4v1h4v-1zm-8.246-5a8 8 0 1 1 12.49.002C17.624 15.774 16 17 16 18.5V21a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.5C8 17 6.375 15.774 5.754 15z\",\n                fill: \"rgba(0,0,0,0.6)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this)]\n        }, `expanded-${expandedNodeIndex}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 5\n  }, this);\n};\n_s(MindMap, \"BHB1XFwtrsdD+lOLPgDw/+TUD1k=\");\n_c = MindMap;\nexport default MindMap;\nvar _c;\n$RefreshReg$(_c, \"MindMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","jsxDEV","_jsxDEV","MindMap","centralQuestion","concepts","_s","positions","setPositions","draggedConcept","setDraggedConcept","dragOffset","setDragOffset","x","y","activeNodes","setActiveNodes","map","expandedNodeIndex","setExpandedNodeIndex","expandedConcepts","setExpandedConcepts","mapRef","conceptRefs","centralRef","current","Array","length","fill","createRef","Object","keys","initialPositions","expandNode","index","console","log","newConcepts","title","description","parentPos","newPositions","direction","i","xOffset","yOffset","toggleNodeActive","inactiveCount","filter","active","prev","newActive","activeNodeIndices","newInactiveCount","remainingActiveIndex","findIndex","renderConnections","mapWidth","clientWidth","mapHeight","clientHeight","centerX","centerY","className","style","position","top","left","width","height","pointerEvents","zIndex","overflow","children","_","pos","x1","y1","x2","y2","stroke","strokeWidth","strokeLinecap","strokeDasharray","opacity","fileName","_jsxFileName","lineNumber","columnNumber","childPos","handleMouseDown","e","id","stopPropagation","containerRect","getBoundingClientRect","containerCenterX","containerCenterY","conceptRect","currentTarget","conceptCenterX","right","conceptCenterY","bottom","offsetX","clientX","offsetY","clientY","handleMouseMove","newX","newY","handleMouseUp","resizeObserver","ResizeObserver","observe","forEach","ref","disconnect","concept","isDragging","cursor","onMouseDown","onClick","border","xmlns","viewBox","d","_c","$RefreshReg$"],"sources":["/Users/kei/AIdeator-LLM/frontend/src/components/MindMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './MindMap.css';\n\nconst MindMap = ({ centralQuestion, concepts }) => {\n  const [positions, setPositions] = useState({});\n  const [draggedConcept, setDraggedConcept] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [activeNodes, setActiveNodes] = useState(concepts.map(() => true));\n  const [expandedNodeIndex, setExpandedNodeIndex] = useState(null);\n  const [expandedConcepts, setExpandedConcepts] = useState([]);\n  const mapRef = useRef(null);\n  const conceptRefs = useRef([]);\n  const centralRef = useRef(null);\n\n  // Initialize refs for concept nodes\n  useEffect(() => {\n    conceptRefs.current = Array(concepts.length).fill().map(() => React.createRef());\n  }, [concepts.length]);\n\n  // Initialize positions in a balanced layout\n  useEffect(() => {\n    if (Object.keys(positions).length === 0) {\n      // Positions that match the reference image exactly\n      const initialPositions = {\n        'concept-0': { x: 0, y: -180 },      // Top\n        'concept-1': { x: -280, y: 0 },      // Left\n        'concept-2': { x: 280, y: 0 },       // Right\n        'concept-3': { x: -180, y: 200 },    // Bottom Left\n        'concept-4': { x: 180, y: 200 }      // Bottom Right\n      };\n      \n      setPositions(initialPositions);\n    }\n  }, [positions]);\n\n  // Expand a node with 5 new child nodes\n  const expandNode = (index) => {\n    console.log(\"Expanding node\", index);\n    setExpandedNodeIndex(index);\n    \n    // Create 5 new concept nodes with titles and descriptions\n    const newConcepts = [\n      {\n        title: \"Fear of letting others down\",\n        description: \"Social and professional pressures can make people fear judgment from peers.\"\n      },\n      {\n        title: \"Concept B\",\n        description: \"A detailed description of concept B and its implications.\"\n      },\n      {\n        title: \"Concept C\",\n        description: \"A detailed description of concept C and its implications.\"\n      },\n      {\n        title: \"Concept D\",\n        description: \"A detailed description of concept D and its implications.\"\n      },\n      {\n        title: \"Concept E\",\n        description: \"A detailed description of concept E and its implications.\"\n      }\n    ];\n    \n    setExpandedConcepts(newConcepts);\n    \n    // Create positions for the new nodes following the parent's side\n    const parentPos = positions[`concept-${index}`];\n    const newPositions = { ...positions };\n    \n    // Determine which side the parent node is on relative to the center\n    // This uses the standard layout: top, left, right, bottom-left, bottom-right\n    let direction;\n    \n    if (index === 0) {\n      // Top node - place children above it\n      direction = 'top';\n    } else if (index === 1) {\n      // Left node - place children to the left\n      direction = 'left';\n    } else if (index === 2) {\n      // Right node - place children to the right\n      direction = 'right';\n    } else if (index === 3) {\n      // Bottom Left node - place children below and to the left\n      direction = 'bottom-left';\n    } else if (index === 4) {\n      // Bottom Right node - place children below and to the right\n      direction = 'bottom-right';\n    }\n    \n    console.log(\"Direction for expanded nodes:\", direction);\n    \n    // Position nodes based on the parent's position/direction\n    switch (direction) {\n      case 'top':\n        // Arrange horizontally above the parent\n        for (let i = 0; i < newConcepts.length; i++) {\n          const xOffset = (i - 2) * 120; // -240, -120, 0, 120, 240\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x + xOffset,\n            y: parentPos.y - 150\n          };\n        }\n        break;\n        \n      case 'left':\n        // Arrange vertically to the left - increase spacing\n        for (let i = 0; i < newConcepts.length; i++) {\n          const yOffset = (i - 2) * 100; // -200, -100, 0, 100, 200\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x - 250,\n            y: parentPos.y + yOffset\n          };\n        }\n        break;\n        \n      case 'right':\n        // Arrange vertically to the right - increase spacing\n        for (let i = 0; i < newConcepts.length; i++) {\n          const yOffset = (i - 2) * 100; // -200, -100, 0, 100, 200\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x + 250,\n            y: parentPos.y + yOffset\n          };\n        }\n        break;\n        \n      case 'bottom-left':\n        // Arrange horizontally below and to the left\n        for (let i = 0; i < newConcepts.length; i++) {\n          const xOffset = (i - 2) * 120; // -240, -120, 0, 120, 240\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x - 100 + xOffset,\n            y: parentPos.y + 150\n          };\n        }\n        break;\n        \n      case 'bottom-right':\n        // Arrange horizontally below and to the right\n        for (let i = 0; i < newConcepts.length; i++) {\n          const xOffset = (i - 2) * 120; // -240, -120, 0, 120, 240\n          newPositions[`expanded-${index}-${i}`] = {\n            x: parentPos.x + 100 + xOffset,\n            y: parentPos.y + 150\n          };\n        }\n        break;\n    }\n    \n    setPositions(newPositions);\n  };\n\n  // Toggle node active state\n  const toggleNodeActive = (index) => {\n    // Count how many inactive nodes we currently have\n    const inactiveCount = activeNodes.filter(active => !active).length;\n    \n    // If this node is already inactive, we can always make it active again\n    if (!activeNodes[index]) {\n      setActiveNodes(prev => {\n        const newActive = [...prev];\n        newActive[index] = true;\n        return newActive;\n      });\n      // If we're activating a node, clear expansion\n      if (expandedNodeIndex !== null) {\n        setExpandedNodeIndex(null);\n        setExpandedConcepts([]);\n      }\n      return;\n    }\n    \n    // If this would be the 5th inactive node (all inactive), don't allow it\n    if (inactiveCount === 4) {\n      // Find the only remaining active node (which must be this one)\n      const activeNodeIndices = activeNodes.map((active, i) => active ? i : -1).filter(i => i >= 0);\n      if (activeNodeIndices.length === 1 && activeNodeIndices[0] === index) {\n        console.log(\"Can't deactivate the last node\");\n        return;\n      }\n    }\n    \n    // Make this node inactive\n    setActiveNodes(prev => {\n      const newActive = [...prev];\n      newActive[index] = false;\n      return newActive;\n    });\n    \n    // Check if we now have 4 inactive nodes (1 active)\n    const newInactiveCount = inactiveCount + 1;\n    if (newInactiveCount === 4) {\n      // Find the one remaining active node\n      const remainingActiveIndex = activeNodes.findIndex((active, i) => active && i !== index);\n      if (remainingActiveIndex !== -1) {\n        // Expand the remaining active node\n        expandNode(remainingActiveIndex);\n      }\n    }\n  };\n  \n  // Render connections between nodes using SVG\n  const renderConnections = () => {\n    if (!mapRef.current) return null;\n    \n    // Get the exact center coordinates of the map in pixels\n    const mapWidth = mapRef.current.clientWidth;\n    const mapHeight = mapRef.current.clientHeight;\n    const centerX = mapWidth / 2;\n    const centerY = mapHeight / 2;\n    \n    return (\n      <svg className=\"connections\" style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: 1,\n        overflow: 'visible'\n      }}>\n        {/* Main lines - directly from central node to concept nodes */}\n        {concepts.map((_, index) => {\n          const pos = positions[`concept-${index}`] || { x: 0, y: 0 };\n          \n          // Use exact pixel coordinates for absolutely precise connections\n          return (\n            <line\n              key={`line-${index}`}\n              x1={centerX}\n              y1={centerY}\n              x2={centerX + pos.x}\n              y2={centerY + pos.y}\n              stroke={activeNodes[index] ? \"#000\" : \"#aaa\"}\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeDasharray={activeNodes[index] ? \"none\" : \"5,5\"}\n              opacity={activeNodes[index] ? 1 : 0.7}\n            />\n          );\n        })}\n        \n        {/* Expanded node connections - from parent node to expanded children */}\n        {expandedNodeIndex !== null && expandedConcepts.map((_, i) => {\n          const parentPos = positions[`concept-${expandedNodeIndex}`] || { x: 0, y: 0 };\n          const childPos = positions[`expanded-${expandedNodeIndex}-${i}`];\n          \n          if (!childPos) return null;\n          \n          // Use exact pixel coordinates for expanded node connections too\n          return (\n            <line\n              key={`expanded-line-${expandedNodeIndex}-${i}`}\n              x1={centerX + parentPos.x}\n              y1={centerY + parentPos.y}\n              x2={centerX + childPos.x}\n              y2={centerY + childPos.y}\n              stroke=\"#000\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n            />\n          );\n        })}\n      </svg>\n    );\n  };\n\n  // Handle starting to drag a concept\n  const handleMouseDown = useCallback((e, id) => {\n    e.stopPropagation(); // Prevent background interactions\n    \n    const containerRect = mapRef.current.getBoundingClientRect();\n    const containerCenterX = containerRect.width / 2;\n    const containerCenterY = containerRect.height / 2;\n    \n    // Calculate offset from the cursor to the element's center\n    const conceptRect = e.currentTarget.getBoundingClientRect();\n    const conceptCenterX = (conceptRect.left + conceptRect.right) / 2 - containerRect.left - containerCenterX;\n    const conceptCenterY = (conceptRect.top + conceptRect.bottom) / 2 - containerRect.top - containerCenterY;\n    \n    // Calculate offset from concept center to click point\n    const offsetX = e.clientX - containerRect.left - containerCenterX - conceptCenterX;\n    const offsetY = e.clientY - containerRect.top - containerCenterY - conceptCenterY;\n    \n    setDraggedConcept(id);\n    setDragOffset({ x: offsetX, y: offsetY });\n  }, []);\n\n  // Handle dragging a concept\n  const handleMouseMove = useCallback((e) => {\n    e.stopPropagation(); // Prevent background interactions\n    \n    if (draggedConcept) {\n      // Get the container's dimensions and position for accurate drag calculation\n      const containerRect = mapRef.current.getBoundingClientRect();\n      const containerCenterX = containerRect.width / 2;\n      const containerCenterY = containerRect.height / 2;\n      \n      // Calculate new position relative to container center\n      const newX = e.clientX - containerRect.left - containerCenterX - dragOffset.x;\n      const newY = e.clientY - containerRect.top - containerCenterY - dragOffset.y;\n      \n      setPositions(prev => ({\n        ...prev,\n        [draggedConcept]: { x: newX, y: newY }\n      }));\n    }\n  }, [draggedConcept, dragOffset]);\n\n  // Handle dropping a concept\n  const handleMouseUp = useCallback((e) => {\n    e.stopPropagation(); // Prevent background interactions\n    setDraggedConcept(null);\n  }, []);\n\n  // Use useEffect to ensure connections are updated when node dimensions change\n  useEffect(() => {\n    // Create a resize observer to detect size changes in nodes\n    const resizeObserver = new ResizeObserver(() => {\n      // Force a re-render to update connections\n      setPositions({...positions});\n    });\n    \n    // Observe central node\n    if (centralRef.current) {\n      resizeObserver.observe(centralRef.current);\n    }\n    \n    // Observe all concept nodes\n    conceptRefs.current.forEach(ref => {\n      if (ref.current) {\n        resizeObserver.observe(ref.current);\n      }\n    });\n    \n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [conceptRefs.current.length, centralRef.current, expandedNodeIndex]);\n\n  // Console log for debugging\n  console.log(\"Active nodes:\", activeNodes);\n  console.log(\"Expanded node index:\", expandedNodeIndex);\n  console.log(\"Expanded concepts:\", expandedConcepts);\n  console.log(\"Positions:\", positions);\n\n  return (\n    <div className=\"mind-map-container\">\n      <div className=\"mind-map\" ref={mapRef}>\n        {/* SVG connections */}\n        {renderConnections()}\n        \n        {/* Central Question Node */}\n        <div className=\"central-question\" ref={centralRef}>\n          {centralQuestion}\n        </div>\n        \n        {/* Concept Nodes */}\n        {concepts.map((concept, index) => {\n          const pos = positions[`concept-${index}`] || { x: 0, y: 0 };\n          const isDragging = draggedConcept === `concept-${index}`;\n          \n          return (\n            <div\n              key={index}\n              className={`concept ${!activeNodes[index] ? 'inactive' : ''} ${isDragging ? 'dragging' : ''} ${index === expandedNodeIndex ? 'expanded' : ''}`}\n              style={{\n                top: `calc(50% + ${pos.y}px)`,\n                left: `calc(50% + ${pos.x}px)`,\n                cursor: isDragging ? 'grabbing' : 'grab'\n              }}\n              ref={conceptRefs.current[index]}\n              onMouseDown={(e) => handleMouseDown(e, `concept-${index}`)}\n              onClick={(e) => {\n                e.stopPropagation();\n                if (!draggedConcept) {\n                  toggleNodeActive(index);\n                }\n              }}\n            >\n              {concept}\n            </div>\n          );\n        })}\n        \n        {/* Expanded Concept Nodes */}\n        {expandedNodeIndex !== null && expandedConcepts.map((concept, index) => {\n          const pos = positions[`expanded-${expandedNodeIndex}-${index}`];\n          if (!pos) return null;\n          \n          return (\n            <div\n              key={`expanded-${expandedNodeIndex}-${index}`}\n              className=\"concept expanded-child\"\n              data-expanded-index={`${expandedNodeIndex}-${index}`}\n              style={{\n                top: `calc(50% + ${pos.y}px)`,\n                left: `calc(50% + ${pos.x}px)`,\n                border: '2px solid #000'\n              }}\n            >\n              <div className=\"concept-title\">{concept.title}</div>\n              {concept.description && (\n                <div className=\"concept-description\">{concept.description}</div>\n              )}\n              <div className=\"concept-icon\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                  <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n                  <path d=\"M9.973 18h4.054c.132-1.202.745-2.194 1.74-3.277.113-.122.832-.867.917-.973a6 6 0 1 0-9.37-.002c.086.107.807.853.918.974.996 1.084 1.609 2.076 1.741 3.278zM14 20h-4v1h4v-1zm-8.246-5a8 8 0 1 1 12.49.002C17.624 15.774 16 17 16 18.5V21a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.5C8 17 6.375 15.774 5.754 15z\" fill=\"rgba(0,0,0,0.6)\"/>\n                </svg>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default MindMap; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}